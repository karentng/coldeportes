{% extends 'base.html' %}
{% load bootstrap3 %}
{% load i18n %}

{% block head %}
	{{ wizard.form.media }}
{% endblock %}

{% block css %}
	<link href="{{STATIC_URL}}plugins/bootstrap-wizard/css/bwizard.min.css" rel="stylesheet" />
	<link href="{{STATIC_URL}}plugins/switchery/switchery.min.css" rel="stylesheet" />

{% endblock %}

{% block miga_pan %}
	<li><a href="{% url 'inicio' %}">Inicio</a></li>
	<li><a href="{% url 'listar_escenarios' %}">CAF</a>
	<li class="active">Registro</li>
{% endblock %}

{% block titulo_contenido %}
	Centro de Acondicionamiento Físico
{% endblock %}

{% block titulo_panel %}
	Registro Nuevo CAF
{% endblock %}

{% block contenido_panel %}
	{% include 'cafs/_wizard.html' with wizard_stage=wizard.steps.step1 %}

	<form action="" method="post">{% csrf_token %}
		<fieldset>
			<div class="well row">
				<div class="" >
					<legend class="pull-left width-full">
						{{ wizard.steps.current }} del CAF:
						{% include 'cafs/_mensajes.html' with wizard_stage=wizard.steps.step1 %}
					</legend>
					<p>Paso {{ wizard.steps.step1 }} de {{ wizard.steps.count }}</p>
					
					{{ wizard.management_form }}
					
					{% for i in wizard.form %}
						<div class="col-md-6">
							{% bootstrap_field i layout="vertical" %}
						</div>
					{% endfor %}
				</div>
			</div>
			
			<ul class="pager bwizard-buttons">
			{% if wizard.steps.prev %}
				<a href="{{ wizard.steps.prev }}" class="btn btn-success pull-left">
					{% trans "← Anterior" %}
				</a>
				<a href="{{ wizard.steps.first }}" class="btn btn-default pull-left" style="margin-left:5px;">
					{% trans "Primer Paso" %}
				</a>
			{% endif %}

			{% if wizard.steps.last == wizard.steps.current %}
				<input class="btn btn-primary pull-right" type="submit" value="{% trans "Finalizar →" %}"/>
			{% else %}
				<input class="btn btn-primary pull-right" type="submit" value="{% trans "Siguiente →" %}"/>
			{% endif %}
			</ul>
		</fieldset>
	</form>
	

{% endblock %}

{% block js %}
	<script src="{{STATIC_URL}}plugins/bootstrap-wizard/js/bwizard.js"></script>
	<script src="{{STATIC_URL}}js/form-wizards.demo.min.js"></script>

	<script src="{{STATIC_URL}}plugins/switchery/switchery.min.js"></script>
	<script type="text/javascript">
		var green = '#00acac',
		    red = '#ff5b57',
		    blue = '#348fe2',
		    purple = '#727cb6',
		    orange = '#f59c1a',
		    black = '#2d353c';

		if ($('[data-render=switchery]').length !== 0) {
	        $('[data-render=switchery]').each(function() {
	            var themeColor = green;
	            if ($(this).attr('data-theme')) {
	                switch ($(this).attr('data-theme')) {
	                    case 'red':
	                        themeColor = red;
	                        break;
	                    case 'blue':
	                        themeColor = blue;
	                        break;
	                    case 'purple':
	                        themeColor = purple;
	                        break;
	                    case 'orange':
	                        themeColor = orange;
	                        break;
	                    case 'black':
	                        themeColor = black;
	                        break;
	                }
	            }
	            var option = {};
	                option.color = themeColor;
	                option.secondaryColor = ($(this).attr('data-secondary-color')) ? $(this).attr('data-secondary-color') : '#dfdfdf';
	                option.className = ($(this).attr('data-classname')) ? $(this).attr('data-classname') : 'switchery';
	                option.disabled = ($(this).attr('data-disabled')) ? true : false;
	                option.disabledOpacity = ($(this).attr('data-disabled-opacity')) ? $(this).attr('data-disabled-opacity') : 0.5;
	                option.speed = ($(this).attr('data-speed')) ? $(this).attr('data-speed') : '0.5s';
	            var switchery = new Switchery(this, option);
	        });
	    }
	</script>
{% endblock %}

{% block script %}
	<script>
		$(document).ready(function() {
			App.init();
			FormWizard.init();
		});
	</script>
{% endblock %}
