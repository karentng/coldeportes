{% extends 'base.html' %}
{% load bootstrap3 %}


{% block miga_pan %}

    <li><a href="{% url 'inicio' %}">Inicio</a></li>
    <li><a href="#">Eventos</a>
    <li><a href="#">Detalle</a></li>
    <li class="active">{{ evento.titulo_evento }}</li>
{% endblock %}

{% block titulo_contenido %}
    Detalles evento
{% endblock %}

{% block js %}
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/gestion_eventos/maps.eventos.js"></script>
    <script type="text/javascript">
        calendarEvents = [];
        {% for actividad in actividades %}
            calendarEvents.push([

                '{{ actividad.dia_actividad|date:"j/n/Y" }}',
                '{{ actividad.titulo }}',
                '#',
                '#2d353c',
                '{{ actividad.descripcion }}'

            ]);
        {% endfor %}

        var chartData = [
            {
                titulo: "Preinscritos",
                valor: {{ participantes.count }},
                color:'#986291'
            },
            {
                titulo: "Aceptados",
                valor: {{ evento.aceptado }},
                color:'#50c7a7'
            },
            {
                titulo: "Resp. Pendiente",
                valor: {{ evento.pendientes }},
                color:'#FFD700'
            },
            {
                titulo: "Resp. Confirmado",
                valor: {{ evento.aprobado }},
                color:'#337ab7'
            },
            {
                titulo: "Resp. Rechazado",
                valor: {{ evento.rechazado }},
                color:'#FF0F00'
            }
        ];
    </script>
    <script type="text/javascript" src="{{ STATIC_URL }}plugins/bootstrap-calendar/js/bootstrap_calendar.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/gestion_eventos/calendar.dashboard.js"></script>
    <script src="{{ STATIC_URL }}amcharts/amcharts.js" type="text/javascript"></script>
    <script src="{{ STATIC_URL }}amcharts/serial.js" type="text/javascript"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/gestion_eventos/amchart.dashboard.js"></script>
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{{ STATIC_URL }}plugins/bootstrap-calendar/css/bootstrap_calendar.css">
    <style rel="stylesheet">
        #map_canvas {
          height: 450px;
          width: 100%;
        }
        #chartdiv{
          height: 450px;
          width: 100%;
        }
    </style>
{% endblock %}

{% block contenido %}
        <!-- begin page-header -->
        <h1 class="page-header">Gestión de Eventos <small>{{ evento.titulo_evento }}</small></h1>
        <!-- end page-header -->
        <!-- begin row -->
        <div class="row">
            <!-- begin col-3 -->
            <div class="col-sm-4">
                <div class="widget widget-stats bg-green">
                    <div class="stats-icon stats-icon-lg"><i class="fa fa-calendar fa-fw"></i></div>
                    <div class="stats-title f-s-20">ACTIVIDADES</div>
                    <div class="stats-number">{{ actividades.count }}</div>
                    <div class="stats-progress progress">
                        <div class="progress-bar" style="width: 100%;"></div>
                    </div>
                    <div class="stats-desc">
                        <a href="{% url 'registrar_actividad' evento.id %}" class="text-white">
                            Gestionar <i class="fa fa-gear"></i>
                        </a>
                    </div>
                </div>
            </div>
            <!-- end col-3 -->
            <!-- begin col-3 -->
            <div class="col-sm-4">
                <div class="widget widget-stats bg-blue">
                    <div class="stats-icon stats-icon-lg"><i class="fa fa-users fa-fw"></i></div>
                    <div class="stats-title f-s-20">PARTICIPANTES</div>
                    <div class="stats-number">{{ participantes.count }}</div>
                    <div class="stats-progress progress">
                        <div class="progress-bar" style="width: 100%;"></div>
                    </div>
                    <div class="stats-desc">
                        {% if "gestion_eventos.change_evento" in perms %}
                            <a href="{% url 'listar_participantes' evento.id %}" class="text-white">
                                Gestionar <i class="fa fa-gear"></i>
                            </a>
                        {% else %}
                            <a href="{% url 'verificar_participante' evento.id %}" class="text-white">
                                Inscribirse <i class="fa fa-pencil"></i>
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            <!-- end col-3 -->
            <!-- begin col-3 -->
            <div class="col-sm-4">
                <div class="widget widget-stats bg-purple">
                    <div class="stats-icon stats-icon-lg"><i class="fa fa-users fa-fw"></i></div>
                    <div class="stats-title f-s-20">CUPOS </div>
                    <div class="stats-number">Total: {{ evento.cupo_participantes }}</div>
                    <div class="stats-progress progress">
                        <div class="progress-bar" style="width: 100%;"></div>
                    </div>
                    <div class="stats-desc">Disponible preinscripción: {{ evento.cupo_disponible }}</div>
                </div>
            </div>
            <!-- end col-3 -->
        </div>
        <!-- end row -->

        <!-- begin row -->
        <div class="row">
            <div class="col-md-4">
                <div class="panel panel-success" >
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            Estadisticas participantes
                        </h4>
                    </div>
                    <div class="panel-body">
                        <div id="chartdiv"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="panel panel-success" >
                    <div class="panel-heading">
                        <h4 class="panel-title">
                            Mapa del lugar
                        </h4>
                    </div>
                    <div class="panel-body">
                        <div id="map_canvas" ></div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="panel panel-success" >
                    <div class="panel-heading">
                        <div class="panel-heading-btn">
                            <a type="button" href="{% url 'ver_actividades' evento.id %}" class="btn btn-warning btn-xs">Visualizar</a>
                        </div>
                        <h4 class="panel-title">
                            Calendario de actividades
                        </h4>
                    </div>
                    <div class="panel-body">
                        <div class="vertical-box">
                            <div id="schedule-calendar" style="height: 450px;" class="bootstrap-calendar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end row -->
{% endblock %}

{% block script %}
    {{ block.super }}
    <script>
		$(document).ready(function() {
			Dashboard.init();
		});
    </script>
{% endblock %}
